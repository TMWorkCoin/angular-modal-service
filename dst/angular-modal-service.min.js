!function(e){function n(o){if(l[o])return l[o].exports;var t=l[o]={exports:{},id:o,loaded:!1};return e[o].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var l={};return n.m=e,n.c=l,n.p="",n(0)}([function(){"use strict";var e=Function("return this")();e.__coverage__||(e.__coverage__={}),e=e.__coverage__,e["/Users/tomasbulva/Projects/forkedStuff/angular-modal-service/src/angular-modal-service.js"]||(e["/Users/tomasbulva/Projects/forkedStuff/angular-modal-service/src/angular-modal-service.js"]={path:"/Users/tomasbulva/Projects/forkedStuff/angular-modal-service/src/angular-modal-service.js",s:{1:0,2:0,3:1,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:1,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0},b:{1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},f:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},fnMap:{1:{name:"(anonymous_1)",line:5,loc:{start:{line:6,column:2},end:{line:6,column:106}}},2:{name:"ModalService",line:7,loc:{start:{line:8,column:2},end:{line:8,column:26}}},3:{name:"getTemplate",line:14,loc:{start:{line:15,column:22},end:{line:15,column:54}}},4:{name:"(anonymous_4)",line:19,loc:{start:{line:21,column:16},end:{line:21,column:35}}},5:{name:"(anonymous_5)",line:21,loc:{start:{line:23,column:13},end:{line:23,column:29}}},6:{name:"appendChild",line:33,loc:{start:{line:35,column:22},end:{line:35,column:46}}},7:{name:"(anonymous_7)",line:41,loc:{start:{line:43,column:21},end:{line:43,column:39}}},8:{name:"(anonymous_8)",line:57,loc:{start:{line:60,column:14},end:{line:60,column:33}}},9:{name:"close",line:73,loc:{start:{line:76,column:19},end:{line:76,column:43}}},10:{name:"(anonymous_10)",line:75,loc:{start:{line:78,column:23},end:{line:78,column:34}}},11:{name:"cleanUpClose",line:122,loc:{start:{line:126,column:10},end:{line:126,column:40}}},12:{name:"(anonymous_12)",line:128,loc:{start:{line:133,column:26},end:{line:133,column:38}}},13:{name:"(anonymous_13)",line:150,loc:{start:{line:157,column:20},end:{line:157,column:36}}}},statementMap:{1:{start:{line:3,column:0},end:{line:3,column:0}},2:{start:{line:5,column:0},end:{line:5,column:0}},3:{start:{line:8,column:2},end:{line:164,column:3}},4:{start:{line:10,column:4},end:{line:10,column:4}},5:{start:{line:15,column:4},end:{line:15,column:4}},6:{start:{line:16,column:6},end:{line:16,column:6}},7:{start:{line:17,column:6},end:{line:28,column:7}},8:{start:{line:18,column:8},end:{line:18,column:8}},9:{start:{line:19,column:13},end:{line:28,column:7}},10:{start:{line:20,column:8},end:{line:20,column:8}},11:{start:{line:22,column:12},end:{line:22,column:12}},12:{start:{line:24,column:12},end:{line:24,column:12}},13:{start:{line:27,column:8},end:{line:27,column:8}},14:{start:{line:29,column:6},end:{line:29,column:6}},15:{start:{line:35,column:4},end:{line:35,column:4}},16:{start:{line:36,column:6},end:{line:36,column:6}},17:{start:{line:37,column:6},end:{line:39,column:7}},18:{start:{line:38,column:8},end:{line:38,column:8}},19:{start:{line:40,column:6},end:{line:40,column:6}},20:{start:{line:43,column:4},end:{line:43,column:4}},21:{start:{line:44,column:6},end:{line:44,column:6}},22:{start:{line:46,column:6},end:{line:46,column:6}},23:{start:{line:49,column:6},end:{line:49,column:6}},24:{start:{line:52,column:6},end:{line:52,column:6}},25:{start:{line:53,column:6},end:{line:56,column:7}},26:{start:{line:54,column:8},end:{line:54,column:8}},27:{start:{line:55,column:8},end:{line:55,column:8}},28:{start:{line:59,column:6},end:{line:59,column:6}},29:{start:{line:63,column:10},end:{line:63,column:10}},30:{start:{line:64,column:10},end:{line:64,column:10}},31:{start:{line:72,column:10},end:{line:72,column:10}},32:{start:{line:73,column:10},end:{line:73,column:10}},33:{start:{line:74,column:10},end:{line:74,column:10}},34:{start:{line:77,column:14},end:{line:77,column:57}},35:{start:{line:77,column:57},end:{line:77,column:57}},36:{start:{line:78,column:14},end:{line:78,column:14}},37:{start:{line:80,column:16},end:{line:80,column:16}},38:{start:{line:82,column:16},end:{line:82,column:16}},39:{start:{line:89,column:10},end:{line:89,column:30}},40:{start:{line:89,column:30},end:{line:89,column:30}},41:{start:{line:93,column:10},end:{line:93,column:10}},42:{start:{line:94,column:10},end:{line:94,column:10}},43:{start:{line:95,column:10},end:{line:95,column:10}},44:{start:{line:98,column:10},end:{line:98,column:10}},45:{start:{line:99,column:10},end:{line:99,column:10}},46:{start:{line:101,column:10},end:{line:103,column:11}},47:{start:{line:102,column:12},end:{line:102,column:12}},48:{start:{line:106,column:10},end:{line:112,column:11}},49:{start:{line:108,column:12},end:{line:108,column:12}},50:{start:{line:111,column:12},end:{line:111,column:12}},51:{start:{line:115,column:10},end:{line:115,column:10}},52:{start:{line:124,column:10},end:{line:124,column:10}},53:{start:{line:126,column:10},end:{line:154,column:11}},54:{start:{line:129,column:12},end:{line:129,column:12}},55:{start:{line:132,column:12},end:{line:132,column:12}},56:{start:{line:135,column:22},end:{line:135,column:22}},57:{start:{line:138,column:22},end:{line:138,column:22}},58:{start:{line:143,column:22},end:{line:143,column:22}},59:{start:{line:144,column:22},end:{line:144,column:22}},60:{start:{line:145,column:22},end:{line:145,column:22}},61:{start:{line:146,column:22},end:{line:146,column:22}},62:{start:{line:147,column:22},end:{line:147,column:22}},63:{start:{line:148,column:22},end:{line:148,column:22}},64:{start:{line:149,column:22},end:{line:149,column:22}},65:{start:{line:153,column:12},end:{line:153,column:12}},66:{start:{line:158,column:10},end:{line:158,column:10}},67:{start:{line:161,column:6},end:{line:161,column:6}},68:{start:{line:166,column:2},end:{line:166,column:2}}},branchMap:{1:{line:16,type:"if",locations:[{start:{line:17,column:6},end:{line:17,column:6}},{start:{line:17,column:6},end:{line:17,column:6}}]},2:{line:18,type:"if",locations:[{start:{line:19,column:13},end:{line:19,column:13}},{start:{line:19,column:13},end:{line:19,column:13}}]},3:{line:35,type:"if",locations:[{start:{line:37,column:6},end:{line:37,column:6}},{start:{line:37,column:6},end:{line:37,column:6}}]},4:{line:51,type:"if",locations:[{start:{line:53,column:6},end:{line:53,column:6}},{start:{line:53,column:6},end:{line:53,column:6}}]},5:{line:60,type:"binary-expr",locations:[{start:{line:63,column:28},end:{line:63,column:28}},{start:{line:63,column:45},end:{line:63,column:27}}]},6:{line:74,type:"if",locations:[{start:{line:77,column:14},end:{line:77,column:14}},{start:{line:77,column:14},end:{line:77,column:14}}]},7:{line:74,type:"binary-expr",locations:[{start:{line:77,column:18},end:{line:77,column:18}},{start:{line:77,column:41},end:{line:77,column:14}}]},8:{line:85,type:"if",locations:[{start:{line:89,column:10},end:{line:89,column:10}},{start:{line:89,column:10},end:{line:89,column:10}}]},9:{line:97,type:"if",locations:[{start:{line:101,column:10},end:{line:101,column:10}},{start:{line:101,column:10},end:{line:101,column:10}}]},10:{line:97,type:"binary-expr",locations:[{start:{line:101,column:14},end:{line:101,column:14}},{start:{line:101,column:38},end:{line:101,column:10}}]},11:{line:102,type:"if",locations:[{start:{line:106,column:10},end:{line:106,column:10}},{start:{line:106,column:10},end:{line:106,column:10}}]},12:{line:148,type:"binary-expr",locations:[{start:{line:153,column:12},end:{line:153,column:12}},{start:{line:153,column:32},end:{line:153,column:12}}]}},code:["'use strict';","","let module = angular.module('angularModalService', []);","","module.factory('ModalService', ['$animate', '$document', '$compile', '$controller', '$http', '$rootScope', '$q', '$templateRequest', '$timeout',","  function($animate, $document, $compile, $controller, $http, $rootScope, $q, $templateRequest, $timeout) {","","  function ModalService() {","","    var self = this;","","    //  Returns a promise which gets the template, either","    //  from the template parameter or via a request to the","    //  template url parameter.","    var getTemplate = function(template, templateUrl) {","      var deferred = $q.defer();","      if (template) {","        deferred.resolve(template);","      } else if (templateUrl) {","        $templateRequest(templateUrl, true)","          .then(function(template) {","            deferred.resolve(template);","          }, function(error) {","            deferred.reject(error);","          });","      } else {",'        deferred.reject("No template or templateUrl has been specified.");',"      }","      return deferred.promise;","    };","","    //  Adds an element to the DOM as the last child of its container","    //  like append, but uses $animate to handle animations. Returns a","    //  promise that is resolved once all animation is complete.","    var appendChild = function(parent, child) {","      var children = parent.children();","      if (children.length > 0) {","        return $animate.enter(child, parent, children[children.length - 1]);","      }","      return $animate.enter(child, parent);","    };","","    self.showModal = function(options) {","      $rootScope.$broadcast('modal-open');","      //  Get the body of the document, we'll add the modal to this.","      var body = angular.element($document[0].body);","","      //  Create a deferred we'll resolve when the modal is ready.","      var deferred = $q.defer();","","      //  Validate the input parameters.","      var controllerName = options.controller;","      if (!controllerName) {",'        deferred.reject("No controller has been specified.");',"        return deferred.promise;","      }","","      //  Get the actual html of the template.","      getTemplate(options.template, options.templateUrl)","        .then(function(template) {","","          //  Create a new scope for the modal.","          var modalScope = (options.scope || $rootScope).$new();","          var rootScopeOnClose = $rootScope.$on('$locationChangeSuccess', cleanUpClose);","","          //  Create the inputs object to the controller - this will include","          //  the scope, as well as all inputs provided.","          //  We will also create a deferred that is resolved with a provided","          //  close function. The controller can then call 'close(result)'.","          //  The controller can also provide a delay for closing - this is","          //  helpful if there are closing animations which must finish first.","          var closeDeferred = $q.defer();","          var closedDeferred = $q.defer();","          var inputs = {","            $scope: modalScope,","            close: function(result, delay) {","              if (delay === undefined || delay === null) delay = 0;","              $timeout(function() {","","                $rootScope.$broadcast('modal-close');","","                cleanUpClose(result);","","              }, delay);","            }","          };","","          //  If we have provided any inputs, pass them to the controller.","          if (options.inputs) angular.extend(inputs, options.inputs);","","          //  Compile then link the template element, building the actual element.","          //  Set the $element on the inputs so that it can be injected if required.","          var linkFn = $compile(template);","          var modalElement = linkFn(modalScope);","          inputs.$element = modalElement;","","          //  Create the controller, explicitly specifying the scope to use.","          var controllerObjBefore = modalScope[options.controllerAs];","          var modalController = $controller(options.controller, inputs, false, options.controllerAs);","","          if (options.controllerAs && controllerObjBefore) {","            angular.extend(modalController, controllerObjBefore);","          }","","          //  Finally, append the modal to the dom.","          if (options.appendElement) {","            // append to custom append element","            appendChild(options.appendElement, modalElement);","          } else {","            // append to body when no custom append element is specified","            appendChild(body, modalElement);","          }","","          //  We now have a modal object...","          var modal = {","            controller: modalController,","            scope: modalScope,","            element: modalElement,","            close: closeDeferred.promise,","            closed: closedDeferred.promise","          };","","          //  ...which is passed to the caller via the promise.","          deferred.resolve(modal);","","          function cleanUpClose(result) {","","            //  Resolve the 'close' promise.","            closeDeferred.resolve(result);","","            //  Let angular remove the element and wait for animations to finish.","            $animate.leave(modalElement)","                    .then(function () {","                      //  Resolve the 'closed' promise.","                      closedDeferred.resolve(result);","","                      //  We can now clean up the scope","                      modalScope.$destroy();","","                      //  Unless we null out all of these objects we seem to suffer","                      //  from memory leaks, if anyone can explain why then I'd","                      //  be very interested to know.","                      inputs.close = null;","                      deferred = null;","                      closeDeferred = null;","                      modal = null;","                      inputs = null;","                      modalElement = null;","                      modalScope = null;","                    });","","            // remove event watcher","            rootScopeOnClose && rootScopeOnClose();","          }","","        })","        .then(null, function(error) { // 'catch' doesn't work in IE8.","          deferred.reject(error);","        });","","      return deferred.promise;","    };","","  }","","  return new ModalService();","}]);",""]}),e=e["/Users/tomasbulva/Projects/forkedStuff/angular-modal-service/src/angular-modal-service.js"],e.s[1]++;var n=angular.module("angularModalService",[]);e.s[2]++,n.factory("ModalService",["$animate","$document","$compile","$controller","$http","$rootScope","$q","$templateRequest","$timeout",function(n,l,o,t,r,i,a,c,s){function m(){e.f[2]++,e.s[4]++;var r=this;e.s[5]++;var m=function(n,l){e.f[3]++,e.s[6]++;var o=a.defer();return e.s[7]++,n?(e.b[1][0]++,e.s[8]++,o.resolve(n)):(e.b[1][1]++,e.s[9]++,l?(e.b[2][0]++,e.s[10]++,c(l,!0).then(function(n){e.f[4]++,e.s[11]++,o.resolve(n)},function(n){e.f[5]++,e.s[12]++,o.reject(n)})):(e.b[2][1]++,e.s[13]++,o.reject("No template or templateUrl has been specified."))),e.s[14]++,o.promise};e.s[15]++;var u=function(l,o){e.f[6]++,e.s[16]++;var t=l.children();return e.s[17]++,t.length>0?(e.b[3][0]++,e.s[18]++,n.enter(o,l,t[t.length-1])):(e.b[3][1]++,e.s[19]++,n.enter(o,l))};e.s[20]++,r.showModal=function(r){e.f[7]++,e.s[21]++,i.$broadcast("modal-open"),e.s[22]++;var c=angular.element(l[0].body);e.s[23]++;var d=a.defer();e.s[24]++;var p=r.controller;return e.s[25]++,p?(e.b[4][1]++,e.s[28]++,m(r.template,r.templateUrl).then(function(l){function m(l){e.f[11]++,e.s[54]++,h.resolve(l),e.s[55]++,n.leave(y).then(function(){e.f[12]++,e.s[56]++,v.resolve(l),e.s[57]++,p.$destroy(),e.s[58]++,$.close=null,e.s[59]++,d=null,e.s[60]++,h=null,e.s[61]++,w=null,e.s[62]++,$=null,e.s[63]++,y=null,e.s[64]++,p=null}),e.s[65]++,e.b[12][0]++,f&&(e.b[12][1]++,f())}e.f[8]++,e.s[29]++;var p=(e.b[5][0]++,r.scope||(e.b[5][1]++,i)).$new();e.s[30]++;var f=i.$on("$locationChangeSuccess",m);e.s[31]++;var h=a.defer();e.s[32]++;var v=a.defer();e.s[33]++;var $={$scope:p,close:function(n,l){e.f[9]++,e.s[34]++,e.b[7][0]++,void 0===l||(e.b[7][1]++,null===l)?(e.b[6][0]++,e.s[35]++,l=0):e.b[6][1]++,e.s[36]++,s(function(){e.f[10]++,e.s[37]++,i.$broadcast("modal-close"),e.s[38]++,m(n)},l)}};e.s[39]++,r.inputs?(e.b[8][0]++,e.s[40]++,angular.extend($,r.inputs)):e.b[8][1]++,e.s[41]++;var b=o(l);e.s[42]++;var y=b(p);e.s[43]++,$.$element=y,e.s[44]++;var g=p[r.controllerAs];e.s[45]++;var S=t(r.controller,$,!1,r.controllerAs);e.s[46]++,e.b[10][0]++,r.controllerAs&&(e.b[10][1]++,g)?(e.b[9][0]++,e.s[47]++,angular.extend(S,g)):e.b[9][1]++,e.s[48]++,r.appendElement?(e.b[11][0]++,e.s[49]++,u(r.appendElement,y)):(e.b[11][1]++,e.s[50]++,u(c,y)),e.s[51]++;var w={controller:S,scope:p,element:y,close:h.promise,closed:v.promise};e.s[52]++,d.resolve(w)}).then(null,function(n){e.f[13]++,e.s[66]++,d.reject(n)}),e.s[67]++,d.promise):(e.b[4][0]++,e.s[26]++,d.reject("No controller has been specified."),e.s[27]++,d.promise)}}return e.f[1]++,e.s[68]++,new m}])}]);
//# sourceMappingURL=./dst/angular-modal-service.min.js.map